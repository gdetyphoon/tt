(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,393542,e=>{"use strict";var t=e.i(80299),i=e.i(4058);e.s(["useSellAccess",0,()=>{let e=(0,t.useViewerRole)();return!e||e&&!(0,i.isAllAdminRole)(e)}])},593926,899414,187083,805055,432779,587165,61382,270894,409092,573272,e=>{"use strict";var t,i=e.i(820130),o=e.i(257140),r=e.i(526292),a=e.i(329129),l=e.i(756442),s=e.i(249600),n=e.i(625432),c=e.i(903275),u=e.i(435019);function d(){let e=(0,i.createEvent)(),t=(0,i.createEvent)(),o=(0,i.createEvent)(),r=(0,i.createEvent)(),a=(0,i.createStore)(0),l=a.map(e=>e>0),s=(0,i.createEffect)(async()=>new Promise(e=>setTimeout(e,1e3)));return a.on(e,(e,t)=>t),a.on(t,()=>0),a.on(o,e=>Math.max(e-1e3,0)),(0,i.sample)({source:a,filter:e=>0===e,target:r}),(0,i.sample)({clock:o,source:{timeLeft:a,pending:s.pending},filter:({timeLeft:e,pending:t})=>!t&&e>0,target:s}),(0,i.sample)({source:e,filter:e=>e>0,target:o}),(0,i.sample)({clock:s.done,source:l,filter:e=>e,target:o}),{start:e,reset:t,tick:o,done:r,$timeLeft:a,$isActive:l}}e.s(["createCooldownTimer",()=>d],899414);let p=(0,i.createStore)(null),m=(0,i.createEvent)();p.on(m,(e,t)=>t);let x=(0,i.createStore)(null),g=(0,i.createEvent)(),h=(0,i.createEffect)(async e=>e.executeAsync());(0,i.sample)({clock:g,source:p,filter:Boolean,target:h}),(0,i.sample)({clock:h.doneData,target:x});let f={outputs:{$recaptchaRef:p,$token:x},inputs:{setRecaptchaRef:m,generateToken:g}};e.s(["reCaptchaModel",0,f],187083);var S=e.i(669337),v=e.i(765769),C=e.i(153547),E=e.i(329518),k=e.i(26114);let b=(0,v.invoke)(C.createApiModel,{queryDocument:k.GetTelegramBotLinkDocument,name:C.ApiEndpointName.GetTelegramBotLink}),j=(0,i.restore)(b.outputs.entity.map(e=>e.data?.getTelegramBotLink.subscribeURL),null);(0,E.attachFailSnackbar)({event:b.inputs.fetchFailed});let M={outputs:{$isFetching:b.outputs.isFetching,$isFinished:b.outputs.isFinished,$isFailed:b.outputs.isFailed,$telegramBotLink:j},inputs:{getTelegramBotLink:b.inputs.fetchEntity,fetchFailed:b.inputs.fetchFailed,fetchSucceeded:b.inputs.fetchSucceeded}};e.s(["getTelegramBotLinkQueryApiModel",0,M],805055);var y=e.i(918452),F=e.i(941842),P=e.i(833498),R=e.i(436295),A=e.i(38699);let I=(0,F.createMutationApiModel)({mutationDocument:k.StartPhoneVerificationDocument,name:F.ApiMutationName.StartPhoneVerification}),T=(0,i.restore)(I.outputs.entity.map(e=>{let t=e.data?.startPhoneVerification.confirmationNumber;return t?(0,y.default)(`+${t}`):null}),null),B=(0,i.restore)(I.outputs.entity.map(e=>e.data?.startPhoneVerification.qrCodeUri),null);(0,i.sample)({clock:I.outputs.isFailed,filter:({error:e})=>!(0,P.detectErrorByCode)({error:e,code:A.CONFLICT_CODE_ERROR}),fn:({error:e})=>({text:e.message,type:"error"}),target:R.snackbarModel.inputs.addSnackbar});let L=(0,i.restore)(I.outputs.isFailed.map(({error:e})=>e),null),H={outputs:{$isFetching:I.outputs.isFetching,$isFinished:I.outputs.isFinished,$isFailed:I.outputs.isFailed,$confirmationPhoneNumber:T,$qrCodeUri:B,$error:L},inputs:{startPhoneVerification:I.inputs.fetchEntity,startPhoneVerificationFailed:I.inputs.fetchFailed,startPhoneVerificationSucceeded:I.inputs.fetchSucceeded}};e.s(["startPhoneVerificationMutationApiModel",0,H],432779);let{$hasConfirmedPhoneNumber:w}=S.viewerService.model.outputs,_=(0,i.createEvent)(),N=(0,i.createEvent)(),O=(0,i.createEvent)(),U=(0,i.createEvent)(),$=(0,i.createStore)(null),G=(0,i.createStore)(0),V=(0,i.createStore)(0),D=(0,i.createStore)(null),z=d(),W=(0,i.createEvent)();G.on(W,e=>e+1);let q=(0,i.createEvent)();G.reset(q);let K=(0,i.createEvent)(),Q=(0,i.createEvent)(),X=(0,i.createEvent)(),J=(0,i.createEvent)(),Y=(0,i.createEvent)();(0,i.sample)({clock:J,fn:()=>({}),target:M.inputs.getTelegramBotLink}),(0,i.sample)({clock:M.inputs.fetchSucceeded,filter:({result:e})=>!!e.data?.getTelegramBotLink,fn:({result:e})=>e.data.getTelegramBotLink.subscribeURL,target:D}),(0,i.sample)({clock:Q,filter:z.$isActive.map(e=>!e),target:W}),(0,i.sample)({clock:z.reset,target:q}),(0,i.sample)({clock:G.updates,fn:e=>e<=0?0:12e4,target:V}),(0,i.sample)({clock:U,target:f.inputs.generateToken}),(0,i.sample)({clock:X,target:f.inputs.generateToken}),(0,i.sample)({clock:f.outputs.$token.updates,target:Q}),(0,i.sample)({clock:Q,source:{phoneNumber:$,recaptchaToken:f.outputs.$token},filter:e=>(0,c.default)(e.phoneNumber)&&(0,u.default)(e.recaptchaToken),fn:({phoneNumber:e,recaptchaToken:t})=>({input:{phoneNumber:e.number.replace(/\D/g,""),recaptchaToken:t}}),target:H.inputs.startPhoneVerification}),(0,i.sample)({clock:Q,source:V,target:z.start}),$.on(K,(e,t)=>t);let Z=(0,i.createStore)(!0),ee=(0,i.createEffect)(()=>new Promise(e=>{setTimeout(()=>{e(!0)},2e3)})),et=(0,i.createEvent)(),ei=ee.doneData;(0,i.sample)({clock:et,target:ee}),(0,i.sample)({clock:ei,fn:()=>!1,target:Z});let eo=(0,i.createStore)([]),er=(0,i.createEvent)();eo.on(er,(e,t)=>e.includes(t)?e:[...e,t]),(0,i.sample)({clock:Y,source:$,filter:e=>!!e,fn:e=>e.number,target:er}),(0,i.sample)({clock:w.updates,source:H.outputs.$isFinished,filter:(e,t)=>!!e&&!!t,target:N}),(0,i.sample)({clock:[N,O],source:a.customRouterModel.outputs.$router,fn:()=>[l.SELL_HREF],target:a.customRouterModel.inputs.pushFx});let ea={inputs:{verifyPhoneViaTelegram:_,changePhoneNumber:K,verifyCaptcha:et,captchaPassed:ei,verifyPhoneViaPhoneCall:Q,verifyPhoneViaPhoneCallRetry:X,resetVerificationCallCooldown:z.reset,openPhoneVerificationModal:J,submitPhoneNumberForm:U,submitPhoneNumberFormSucceeded:H.inputs.startPhoneVerificationSucceeded,verifyPhoneViaPhoneCallSucceeded:N,verifyPhoneViaTelegramSucceeded:O,phoneAlreadyInUse:Y},outputs:{$phoneNumber:$,$needsCaptcha:Z,$verificationCallCooldownTimeIsActive:z.$isActive,$verificationCallCooldownTimeLeft:z.$timeLeft,$submitPhoneNumberFormSubmitting:H.outputs.$isFetching,$takenPhoneNumbers:eo,$telegramBotLink:D}};e.s(["phoneVerificationModel",0,ea],587165);var el=e.i(10544),es=e.i(526459),en=e.i(961362),ec=((t={}).Confirmation="confirmation",t.Restriction="restriction",t);e.s(["IconType",()=>ec],61382);let eu=[{id:(0,en.generateId)(),text:"Заполнить достоверную информацию о товаре",iconType:ec.Confirmation},{id:(0,en.generateId)(),text:"Обработать заказ в течение 24 часов после оплаты",iconType:ec.Confirmation},{id:(0,en.generateId)(),text:"Общаться только через чат на сайте",iconType:ec.Confirmation},{id:(0,en.generateId)(),text:"Запрещено продавать товары, полученные нелегальным путем",iconType:ec.Restriction},{id:(0,en.generateId)(),text:"Запрещено получать оплату на прямые реквизиты",iconType:ec.Restriction}];e.s(["SELL_CONDITIONS",0,eu],270894);let ed=eu.reduce((e,t)=>({...e,[t.id]:!1}),{}),ep=e=>Object.values(e).every(Boolean),em=(0,i.createEvent)(),ex=(0,i.createStore)(ed).reset(em),eg=(0,i.createStore)(!1),eh=(0,i.createApi)(ex,{toggleSellConditionAcceptance:(e,t)=>({...e,[t]:!e[t]})});(0,i.sample)({clock:ex,fn:e=>ep(e),target:eg});let ef={outputs:{$sellConditionsAcceptanceLookup:ex,$allSellConditionsMarked:eg},inputs:{toggleSellConditionAcceptance:eh.toggleSellConditionAcceptance,resetLookup:em}};e.s(["sellConditionListModel",0,ef],409092);let{$shouldVerifyPhone:eS}=S.viewerService.model.outputs,{localStorageModelFactory:ev}=es.localStorageService.factories,{createLocalStorageModel:eC,SELL_CONDITIONS_ACCEPTANCE_KEY:eE}=ev,{pushFx:ek}=a.customRouterModel.inputs,{$sellConditionsAcceptanceLookup:eb}=ef.outputs,ej=(0,i.createEvent)(),eM=(0,i.createEvent)(),ey=(0,i.createEvent)(),{$storage:eF,changeValue:eP}=eC({key:eE,initialValue:{time:null,value:!1}});(0,i.sample)({clock:(0,i.sample)({clock:eM,source:eb,filter:ep}),fn:()=>({value:!0,time:(0,el.default)().toISOString()}),target:eP}),(0,i.sample)({clock:eP,target:ey}),(0,i.sample)({clock:ey,source:eS,filter:Boolean,target:ea.inputs.openPhoneVerificationModal}),(0,i.sample)({clock:ey,source:eS,filter:e=>!e,fn:()=>[l.SELL_HREF],target:ek});let eR={outputs:{$sellConditionsAcceptance:eF},inputs:{openSellConditionsModal:ej,acceptSellConditions:eM,sellConditionsHaveBeenAccepted:ey}};e.s(["acceptSellConditionsModel",0,eR],573272);var eA=e.i(774114);let{$viewer:eI,$shouldVerifyPhone:eT,$lastItemCreatedAt:eB,$isAuth:eL,$isSeller:eH}=S.viewerService.model.outputs,ew=(0,i.createEvent)(),e_=eR.outputs.$sellConditionsAcceptance.map(({value:e})=>e),eN=eB.map(e=>!e||(0,el.default)(e).isBefore(eA.UPDATE_3_3_RELEASE_DATE)),eO=(0,r.and)(eN,e_.map(e=>!e)),eU=(0,i.sample)({source:{viewer:eI,shouldAcceptSellConditions:eO,shouldVerifyPhone:eT},fn:({viewer:e,shouldAcceptSellConditions:t,shouldVerifyPhone:i})=>[e,i].some(o.default)?null:(({shouldAcceptSellConditions:e,shouldVerifyPhone:t})=>!e&&!t)({shouldAcceptSellConditions:t,shouldVerifyPhone:i})}),e$=(0,i.sample)({source:{viewerIsAuth:eL,viewerIsSeller:eH,viewerCanSell:eU},fn:({viewerIsAuth:e,viewerIsSeller:t,viewerCanSell:i})=>e&&t&&i?l.SELL_HREF:l.SELLER_HREF});(0,i.sample)({clock:ew,source:eI,filter:e=>!e,target:s.authModalModel.inputs.openModal}),(0,i.sample)({clock:ew,source:eI,filter:e=>!e,fn:()=>n.AUTH_INTEGRATION_MESSAGE,target:s.authModalModel.inputs.openSnackbar}),(0,i.sample)({clock:ew,source:{shouldAcceptSellConditions:eO,viewer:eI},filter:({shouldAcceptSellConditions:e,viewer:t})=>!!t&&e,target:eR.inputs.openSellConditionsModal}),(0,i.sample)({clock:ew,source:{viewer:eI,shouldAcceptSellConditions:eO,shouldVerifyPhone:eT},filter:({viewer:e,shouldAcceptSellConditions:t,shouldVerifyPhone:i})=>!!e&&!t&&i,target:ea.inputs.openPhoneVerificationModal}),(0,i.sample)({clock:ew,source:eU,filter:e=>!!e,fn:()=>[l.SELL_HREF],target:a.customRouterModel.inputs.pushFx}),(0,i.sample)({clock:eU,source:a.customRouterModel.outputs.$router,filter:(e,t)=>e?.pathname===l.SELL_HREF&&!1===t,fn:()=>[l.SELLER_HREF],target:a.customRouterModel.inputs.replaceFx}),e.s(["startSellModel",0,{outputs:{$viewerCanSell:eU,$sellHref:e$},inputs:{startSell:ew}}],593926)},78022,108776,644401,800738,e=>{"use strict";var t,i=e.i(391398),o=e.i(191788),r=e.i(129297),a=e.i(441860),l=e.i(352529),s=e.i(491847),n=e.i(756442),c=e.i(225429),u=e.i(586734),d=e.i(393542),p=e.i(593926);let{$isBlocked:m}=e.i(247504).viewerModel.outputs,x=()=>(0,u.useUnit)(m),g=()=>{let e=(0,d.useSellAccess)(),t=(0,u.useUnit)(p.startSellModel.outputs.$sellHref);return x()?n.AUTH_HREF:e?t:n.NOT_FOUND_HREF};e.s(["useSellHref",0,g],108776);var h=e.i(412751),f=e.i(769221),S=e.i(437788),v=e.i(373909),C=e.i(74166);let E=e=>(0,i.jsx)(C.default,{viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,sx:{width:32,height:32,...e.sx},children:(0,i.jsxs)("g",{fillRule:"evenodd",children:[(0,i.jsx)("path",{fillRule:"nonzero",d:"m4.18 15.187-.004-.008C4.598 8.75 9.95 3.666 16.49 3.666c6.815 0 12.34 5.522 12.34 12.333 0 6.81-5.525 12.332-12.34 12.332-5.564 0-10.267-3.678-11.808-8.735l4.672 1.926a3.42 3.42 0 0 0 2.022 2.417 3.424 3.424 0 0 0 4.738-3.252l4.32-3.086.107.002a4.696 4.696 0 0 0 4.687-4.693 4.694 4.694 0 0 0-4.687-4.692 4.695 4.695 0 0 0-4.688 4.692l.001.06-3.02 4.385c-.489-.023-.98.063-1.445.255a3.4 3.4 0 0 0-.578.305z"}),(0,i.jsx)("path",{fillRule:"nonzero",d:"M15.129 21.793a2.643 2.643 0 0 1-3.453 1.424 2.63 2.63 0 0 1-1.36-1.296l1.527.632a1.944 1.944 0 0 0 1.495-3.591l-1.578-.654c.61-.23 1.301-.239 1.947.03a2.62 2.62 0 0 1 1.426 1.433 2.63 2.63 0 0 1-.004 2.022"}),(0,i.jsx)("path",{d:"M20.54 16.037a3.13 3.13 0 0 1-3.122-3.127 3.13 3.13 0 0 1 3.123-3.126 3.13 3.13 0 0 1 3.124 3.126 3.13 3.13 0 0 1-3.124 3.127m-2.34-3.132a2.347 2.347 0 0 0 2.346 2.348 2.348 2.348 0 0 0 0-4.697 2.35 2.35 0 0 0-2.345 2.349"})]})});e.s(["SteamBlankIcon",0,E],644401);var k=e.i(344273),b=e.i(381396),j=e.i(951675),M=e.i(63316),y=e.i(2202),F=e.i(275099),P=e.i(973520);let R=({counter:e,children:t})=>(0,i.jsxs)(P.default,{display:"flex",flexDirection:"column",position:"relative",children:[!!e&&(0,i.jsx)(P.default,{component:"span",sx:{position:"absolute",display:"flex",right:"-8px",border:"1px solid",borderRadius:{xs:"10px",lg:"12px"},borderColor:"background.default",alignSelf:"center",alignItems:"center",justifyContent:"center",minWidth:{xs:"20px",lg:"24px"},height:{xs:"20px",lg:"24px"},bgcolor:"blue.main",typography:"12",fontWeight:700,color:"blue.contrastText",paddingX:"5px"},children:e}),t]});var A=((t={}).Search="search",t.Sell="sell",t.Chats="chats",t.Profile="profile",t.Steam="steam",t);e.s(["TabBarButton",0,({button:e,onClick:t})=>{let{id:r,title:a,counter:l,routes:s,icon:n,mainHref:c}=e,{push:u,route:d}=(0,M.useRouter)(),p=(0,o.useMemo)(()=>s.includes(d),[s,d]),m=(0,o.useCallback)(e=>{e.preventDefault(),t(r),c&&u(c).catch(console.error)},[c,u,r,t]);return c?(0,i.jsx)(j.Box,{sx:(0,F.mergeSx)(e=>({flex:1,"&:hover .Title.MuiBox-root":{color:{lg:"blue.text"}},"&:hover .Icon":{color:{lg:"blue.text"}},[e.breakpoints.up("lg")]:{height:"52px"}}),"search"===r&&(e=>({[e.breakpoints.up("lg")]:{display:"none"}}))),children:(0,i.jsxs)(j.Box,{className:"Button",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",p:{xs:"8px 0 4px",md:"12px 0 8px",lg:0},cursor:"pointer",border:"none"},onClick:m,href:c,component:y.default,children:[(0,i.jsx)(j.Box,{className:"Icon",sx:(0,F.mergeSx)({display:"flex",flexDirection:"column",color:p?"blue.text":"gray.3",position:"relative"}),children:(0,i.jsx)(R,{counter:l,children:n})}),(0,i.jsx)(j.Box,{className:"Title",typography:"12",sx:(0,F.mergeSx)({color:p?"blue.text":"text.secondary"}),children:a})]})}):null},"TabBarButtonId",()=>A],800738),e.s(["useTabBar",0,()=>{let{isAuth:e}=(0,k.useIsAuth)(),t=(0,S.useViewerHasAdminRole)(),u=(0,f.useIsGamesAndApps)(),d=(0,h.useIsAccountant)(),p=(0,b.useViewer)(),m=x(),C=m?n.AUTH_HREF:n.CHATS_HREF,j=e&&p?.username&&!m?(0,c.getUserProfileHrefByUsername)({pathname:n.PROFILE_PRODUCTS_HREF,username:p.username}):n.AUTH_HREF,M=g();return{buttons:(0,o.useMemo)(()=>[{id:A.Search,title:"Поиск",icon:(0,i.jsx)(r.SearchIcon,{}),routes:n.SEARCH_HREFS,mainHref:n.SEARCH_HREFS[0]},{id:A.Steam,title:"Steam",icon:(0,i.jsx)(E,{sx:{width:{xs:24,lg:32},height:{xs:24,lg:32}}}),routes:[n.STEAM_HREF],mainHref:n.STEAM_HREF},{id:A.Sell,title:"Продать",icon:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.PlusBarIcon,{size:"md",sx:{display:{xs:"block",lg:"none"}}}),(0,i.jsx)(a.PlusBarIcon,{size:"lg",sx:{display:{xs:"none",lg:"block"},width:"2rem",height:"2rem"}})]}),routes:n.SELL_HREFS,mainHref:M},{id:A.Chats,title:"Чаты",icon:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ChatBarIcon,{size:"md",sx:{display:{xs:"block",lg:"none"}}}),(0,i.jsx)(l.ChatBarIcon,{size:"lg",sx:{display:{xs:"none",lg:"block"},width:"2rem",height:"2rem"}})]}),routes:n.CHATS_HREFS,mainHref:C,counter:p?.unreadChatsCounter},{id:A.Profile,title:"Профиль",icon:e&&p?(0,i.jsx)(v.UserAvatar,{user:p,size:"nav-bar"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.ProfileBarIcon,{size:"md",sx:{display:{xs:"block",lg:"none"}}}),(0,i.jsx)(s.ProfileBarIcon,{size:"lg",sx:{display:{xs:"none",lg:"block"},width:"2rem",height:"2rem"}})]}),routes:n.PROFILE_HREFS.concat(n.DEAL_HREF),mainHref:j}],[e,M,C,j,p]).filter(({id:e})=>{let i=e===A.Sell,o=e===A.Chats;return(!i||M!==n.NOT_FOUND_HREF)&&!(o&&(t||u||d))})}}],78022)},20519,e=>{"use strict";var t=e.i(391398),i=e.i(191788),o=e.i(826551),r=e.i(78022),a=e.i(800738);e.s(["TabBarButtonList",0,()=>{let{buttons:e}=(0,r.useTabBar)(),l=(0,i.useCallback)(e=>{e===a.TabBarButtonId.Steam&&o.analyticsService.model.inputs.steamIconInHeaderClicked()},[]);return(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsx)(a.TabBarButton,{button:e,onClick:l},e.id))})}])},764754,683956,846637,e=>{"use strict";var t,i=e.i(391398),o=e.i(973520),r=e.i(375275),a=e.i(586734),l=e.i(128892),s=e.i(662271),n=e.i(123108),c=e.i(820130),u=((t={}).Form="form",t.Completed="completed",t);e.s(["CreateGameProposalModalStep",()=>u],683956);let d=(0,c.createStore)({isOpen:!1,step:u.Form}),p=(0,c.createApi)(d,{openModal:()=>({step:u.Form,isOpen:!0}),closeModal:()=>({step:u.Form,isOpen:!1}),updateModalStep:(e,t)=>({step:t,isOpen:e.isOpen})}),m={inputs:{openModal:p.openModal,closeModal:p.closeModal,updateModalStep:p.updateModalStep},outputs:{$createGameProposalStore:d}};e.s(["createGameProposalModel",0,m],846637),e.s(["CreateGameProposalButton",0,({variant:e="item",name:t="Предложить",caption:c,...u})=>{let{openModal:d}=(0,a.useUnit)({openModal:m.inputs.openModal});switch(e){case"list-item":return(0,i.jsx)(n.UiGameListItem,{onClick:d,...u,sx:{cursor:"pointer"},icon:(0,i.jsx)(o.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:"1 1 auto",backgroundColor:"gray.5"},children:(0,i.jsx)(l.PlusIcon,{sx:{color:"blue.text"}})}),name:(0,i.jsx)(r.default,{variant:"16",component:"p",fontWeight:600,color:"blue.text",sx:{lineHeight:"125%"},children:t}),caption:c});case"item":return(0,i.jsx)(s.UiGame,{onClick:d,sx:{cursor:"pointer"},icon:(0,i.jsx)(o.default,{sx:{position:"relative",display:"flex",flex:1,alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:"gray.5",overflow:"hidden",width:"100%"},children:(0,i.jsx)(l.PlusIcon,{sx:{color:"blue.text"}})}),name:(0,i.jsx)(r.default,{variant:"12",component:"p",fontWeight:600,color:"blue.text",sx:{mt:.5},children:t}),...u});case"tab":return(0,i.jsxs)(o.default,{onClick:d,sx:{display:"flex",alignItems:"center",cursor:"pointer"},...u,children:[(0,i.jsx)(o.default,{sx:{display:"flex",width:{xs:"27px",md:"34px"},height:{xs:"27px",md:"34px"},backgroundColor:"gray.5",borderRadius:"8px",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(l.PlusIcon,{sx:{width:{xs:14,md:16},height:{xs:14,md:16},color:"blue.text"}})}),(0,i.jsx)(r.default,{variant:"14",sx:{color:"blue.text",fontWeight:600,marginLeft:1},children:t})]})}}],764754)},629067,e=>{"use strict";var t=e.i(191788),i=e.i(625432),o=e.i(344273),r=e.i(249600);e.s(["useAuthIntegrationOpen",0,e=>{let{onSignIn:a,onSignUp:l}=e??{},{isAuth:s,isAuthButNotRegistered:n}=(0,o.useIsAuth)(),{openModal:c,openSnackbar:u,setStep:d,setOnSignIn:p,setOnSignUp:m}=(0,r.useAuthModal)(),x=(0,t.useCallback)(()=>{a&&p(a),l&&m(l)},[a,p,l,m]);return(0,t.useCallback)(()=>{n&&d(r.AuthStep.SignUp),c(),s||u(i.AUTH_INTEGRATION_MESSAGE),x()},[c,u,s,n,d,x])}])},545153,e=>{"use strict";var t=e.i(391398),i=e.i(764754),o=e.i(191788),r=e.i(586734),a=e.i(744888),l=e.i(63316),s=e.i(846637),n=e.i(538865),c=e.i(375275),u=e.i(176253),d=e.i(525527),p=e.i(23319),m=e.i(473005),x=e.i(424129),g=e.i(370304),h=e.i(782009),f=e.i(283930),S=e.i(440224),v=e.i(415362),C=e.i(987423),E=e.i(533921),k=e.i(726824),b=e.i(386141),j=e.i(736921),M=e.i(629067),y=e.i(652356),F=e.i(581405),P=e.i(344273);e.i(656720);var R=e.i(148357),A=e.i(326801);let I=R.object().shape({gameProposalName:A.string().required("Введите название игры/приложения")});var T=e.i(683956);let B=({initialGameName:e})=>{let i=(0,C.default)(),{isAuth:a}=(0,P.useIsAuth)(),l=(0,M.useAuthIntegrationOpen)(),{updateModalStep:R}=(0,r.useUnit)({updateModalStep:s.createGameProposalModel.inputs.updateModalStep}),A=(0,o.useMemo)(()=>({gameProposalName:e??"",gameProposalCategoryIds:[]}),[e]),[B,L]=(0,E.useCreateGameProposalMutation)(),H=(0,o.useCallback)(async e=>{a?await B({variables:{input:{name:e.gameProposalName,categoryIds:e.gameProposalCategoryIds}},onError(){i.open()},onCompleted(){R(T.CreateGameProposalModalStep.Completed)}}):l()},[B,i,R,a,l]),w=L.loading,_=L.error,N=(0,E.useCategoriesQuery)({variables:{pagination:{first:k.CATEGORIES_COUNT}}}),O=N.data?.categories.edges;return(0,t.jsx)(n.Formik,{initialValues:A,onSubmit:H,validationSchema:I,children:(0,t.jsxs)(F.ModalForm,{children:[(0,t.jsx)(p.default,{sx:{justifyContent:{xs:"center"}},children:(0,t.jsx)(g.Heading,{variant:"16",children:"Предложить игру/приложение"})}),(0,t.jsxs)(m.default,{disablePadding:!0,children:[(0,t.jsx)(u.ModalContainer,{sx:{marginBottom:{xs:2,md:2.5}},children:(0,t.jsx)(c.default,{component:"span",variant:"14",color:"gray.2",children:"Если на Playerok нет игры или приложения, которые вы ищите, укажите название ниже"})}),(0,t.jsxs)(u.ModalContainer,{sx:{marginBottom:{xs:2.5,md:3}},children:[(0,t.jsx)(h.Input,{variant:"line2",name:"gameProposalName",placeholder:"Название",type:"text",sx:e=>({padding:"11px 12px 13px",[e.breakpoints.up("md")]:{padding:"17px 20px 19px"}}),inputSx:{typography:"20","&::placeholder":{color:"gray.3"}}}),(0,t.jsx)(v.ErrorMessage,{name:"gameProposalName"})]}),N.loading&&(0,t.jsx)(j.default,{}),O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ModalContainer,{children:(0,t.jsx)(c.default,{variant:"12",color:"gray.2",children:"Категория"})}),(0,t.jsx)(f.List,{items:O,renderItem:({node:e})=>(0,t.jsx)(S.ListItemWithDivider,{modalPadding:!0,fullWidth:!0,children:(0,t.jsx)("label",{children:(0,t.jsx)(y.CheckboxListItem,{title:e?.name,inputProps:{name:"gameProposalCategoryIds",value:e?.id},clickable:!0})})},e?.id)})]})]}),(0,t.jsx)(d.default,{children:(0,t.jsx)(x.default,{fullWidth:!0,loading:w,disabled:w,children:"Отправить"})}),(0,t.jsx)(b.Snackbar,{variant:b.SnackbarVariant.Error,open:i.isOpen&&!!_?.message,message:_?.message,onClose:i.close})]})})};var L=e.i(413021),H=e.i(854129),w=e.i(450262);let _=()=>{let{closeModal:e}=(0,r.useUnit)({closeModal:s.createGameProposalModel.inputs.closeModal});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.default,{}),(0,t.jsx)(m.default,{children:(0,t.jsx)(w.default,{image:(0,L.getAssetSource)("/images/Icons/Success.png"),title:"Отправлено",caption:"Рассмотрим эту игру/приложение"})}),(0,t.jsx)(d.default,{children:(0,t.jsx)(H.Button,{fullWidth:!0,onClick:e,children:"Хорошо"})})]})},N=({initialGameName:e})=>{let i=(0,l.useRouter)(),{modal:n,closeModal:c}=(0,r.useUnit)({modal:s.createGameProposalModel.outputs.$createGameProposalStore,closeModal:s.createGameProposalModel.inputs.closeModal});return(0,o.useEffect)(()=>{let e=()=>c();return i.events.on("routeChangeStart",e),()=>{i.events.off("routeChangeStart",e)}},[c,i.events]),(0,t.jsx)(a.default,{variant:"completed"===n.step?"secondary":"primary",open:n.isOpen,onClose:c,children:{form:(0,t.jsx)(B,{initialGameName:e}),completed:(0,t.jsx)(_,{})}[n.step]})};e.s(["CreateGameProposal",0,({buttonProps:e,initialGameName:o})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.CreateGameProposalButton,{...e}),(0,t.jsx)(N,{initialGameName:o})]})],545153)},291208,e=>{"use strict";var t=e.i(828506);e.s(["formatTestimonialCounter",0,e=>{if((e=e||0)>1e6)return"1 млн+";if(e.toString().length>5){let i=new t.default(e).div(1e6).decimalPlaces(1,t.default.ROUND_DOWN).toNumber();return`${i} млн`.replace(/\./g,",")}return e}])},197959,e=>{"use strict";var t=e.i(391398),i=e.i(12484),o=e.i(191788);let r=(0,o.createContext)(null);e.s(["ColorModeMuiProvider",0,({children:e})=>{let{mode:a,setMode:l,systemMode:s}=(0,i.useColorScheme)(),n=(0,o.useMemo)(()=>({currentMode:a,resolvedMode:s||a}),[a,s]),c=(0,o.useMemo)(()=>({data:n,setMode:l}),[n,l]);return(0,t.jsx)(r.Provider,{value:c,children:e})},"useColorMode",0,()=>{let e=(0,o.useContext)(r);if(!e)throw Error("context not provided");let{data:{currentMode:t,resolvedMode:i},setMode:a}=e,l=(0,o.useCallback)(()=>{a("light"===i?"dark":"light")},[i,a]);return{currentMode:t,resolvedMode:i,toggleColorMode:l}}])}]);